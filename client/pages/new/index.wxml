<import src="/common/field/index.wxml" />
<import src="/dist/toptips/index.wxml" />
<import src="/dist/toast/index.wxml" />
<import src="/dist/switch/index.wxml" />
<template is="zan-toptips" data="{{ zanTopTips }}"></template>

<form bindsubmit="formSubmit">
  <view class="container">
    <view class="zan-panel">
      <view class="zan-cell zan-field">
        <view class="zan-cell__hd zan-field__title">服务类别</view>
        <picker
          mode="selector"
          id="type_id"
          range-key="name"
          class="zan-field__input zan-cell__bd"
          range="{{ types }}"
          value="{{ inputData.type_idx }}"
          bindchange="onTypeChange"
        >
          {{ types[inputData.type_idx].name }}
        </picker>
      </view>
    </view>
    <view class="zan-panel">
      <template is="zan-field" data="{{ type: 'input', componentId:'title', placeholder: typeConfig['type_'+types[inputData.type_idx].id] }}"></template>
    </view>
    <view class="zan-panel">
      <view class="zan-cell zan-field">
        <view class="zan-cell__hd zan-field__title" style="padding:4px 0;min-height:22px;">截止时间</view>
        <picker name="date1" mode="date" value="{{inputData.date}}" start="{{inputData.date}}"  end="{{endDate}}" bindchange="_handleZanFieldChange" data-component-id="date">
                <view class="picker">
                  {{inputData.date}}
                </view>
              </picker>
              <picker name="date2" mode="time" value="{{inputData.time}}" start="00:00" end="23:59" bindchange="_handleZanFieldChange" data-component-id="time">
                <view class="picker">
                  {{inputData.time}}
                </view>
        </picker>
      </view>
    </view>
    <view class="zan-panel">
      <view class="zan-cell zan-field">
        <view class="zan-icon zan-icon-photo" style="font-size: 16px; color:cornflowerblue"></view>
        <view bindtap="doUpload" class="zan-cell__hd zan-field__title zan-field__input">添加图片（最多三张）</view>
      </view>
    </view>
    <view class="zan-panel" wx:if="{{ inputData.img_urls[0] }}">
      <view class="zan-cell zan-field">
        <view class="zan-field__input zan-cell__bd preview-imgs">
          <image bindtap="previewImage" wx:for="{{inputData.img_urls}}" wx:for-index="idx" wx:for-item="item" mode="aspectFill" src="{{item}}" data-idx="{{idx}}" wx:key="idx" ></image>
        </view>
      </view>
    </view>
    <view class="zan-panel" style='height:300rpx'>
      <view class="zan-cell zan-field">
      <textarea bindinput="_handleZanFieldChange" class="zan-field__input zan-cell__bd" style="height:260rpx" name="description" data-component-id="description" maxlength="200" placeholder="详细内容（选填，200字以内）" placeholder-class="zan-field__placeholder" value="">
</textarea>
    </view>
    </view>
    <view class="zan-panel">
      <view class="zan-cell zan-cell--switch">
        <view class="zan-cell__bd">仅实名用户参与</view>
        <view class="zan-cell__ft">
          <template is="zan-switch" data="{{ checked : inputData.only_verified ,componentId:'only_verified', disabled:false, loading:false }}"/>
        </view>
      </view>
    </view>
    <view class="zan-panel">
      <button formType="submit" disabled="{{btnDisabled}}" loading="{{btnLoad}}"  class="zan-btn zan-btn--large zan-btn--primary">提交</button>
    </view>
  </view>
</form>
<template is="zan-toast" data="{{ zanToast }}"></template>